{"version":3,"sources":["pixelated-face.js"],"names":["video","document","querySelector","canvas","faceCanvas","console","log","ctx","getContext","faceCtx","faceDetector","window","FaceDetector","SIZE","SCALE","populateVideo","stream","navigator","mediaDevices","getUserMedia","width","height","srcObject","play","videoWidth","videoHeight","detect","faces","forEach","drawFace","censorFace","requestAnimationFrame","face","top","left","boundingBox","clearRect","strokeStyle","lineWidth","strokeRect","imageSmoothingEnabled","drawImage","x","y","then"],"mappings":"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","file":"pixelated-face.9301d95e.js","sourceRoot":"..","sourcesContent":["const video = document.querySelector(`.video`);\r\nconst canvas = document.querySelector(`.first`);\r\nconst faceCanvas = document.querySelector(`.second`);\r\nconsole.log(video, canvas, faceCanvas);\r\nconst ctx = canvas.getContext(`2d`);\r\nconst faceCtx = faceCanvas.getContext(`2d`);\r\nconst faceDetector = new window.FaceDetector();\r\nconst SIZE = 10;\r\nconst SCALE = 1.5;\r\n\r\nasync function populateVideo() {\r\n  const stream = await navigator.mediaDevices.getUserMedia({\r\n    video: { width: 1280, height: 720 }\r\n  });\r\n  video.srcObject = stream;\r\n  await video.play();\r\n  canvas.width = video.videoWidth;\r\n  canvas.height = video.videoHeight;\r\n  faceCanvas.width = video.videoWidth;\r\n  faceCanvas.height = video.videoHeight;\r\n}\r\n\r\nasync function detect() {\r\n  const faces = await faceDetector.detect(video);\r\n  console.log(faces);\r\n  faces.forEach(drawFace);\r\n  faces.forEach(censorFace);\r\n  requestAnimationFrame(detect);\r\n}\r\n\r\nfunction drawFace(face) {\r\n  const { width, height, top, left } = face.boundingBox;\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  ctx.strokeStyle = \"#ffc600\";\r\n  ctx.lineWidth = 2;\r\n  ctx.strokeRect(left, top, width, height);\r\n}\r\nfunction censorFace({ boundingBox: face }) {\r\n  //destructuring and giving it a name\r\n  faceCtx.imageSmoothingEnabled = false;\r\n  faceCtx.clearRect(0, 0, faceCanvas.width, faceCanvas.height);\r\n  faceCtx.drawImage(\r\n    video,\r\n    face.x,\r\n    face.y,\r\n    face.width,\r\n    face.height,\r\n    face.x,\r\n    face.y,\r\n    SIZE,\r\n    SIZE\r\n  );\r\n\r\n  const width = SCALE * face.width;\r\n  const height = SCALE * face.height;\r\n  faceCtx.drawImage(\r\n    faceCanvas,\r\n    face.x,\r\n    face.y,\r\n    SIZE,\r\n    SIZE,\r\n    face.x - (width - face.width) / 2,\r\n    face.y - (height - face.height) / 2,\r\n    width,\r\n    height\r\n  );\r\n}\r\n\r\npopulateVideo().then(detect);\r\n"]}