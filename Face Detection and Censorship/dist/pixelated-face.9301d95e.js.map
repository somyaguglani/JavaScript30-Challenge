{"version":3,"sources":["pixelated-face.js"],"names":["video","document","querySelector","canvas","faceCanvas","console","log","ctx","getContext","faceCtx","faceDetector","window","FaceDetector","inputs","querySelectorAll","options","SIZE","SCALE","forEach","input","addEventListener","handleEvent","event","currentTarget","name","value","populateVideo","stream","navigator","mediaDevices","getUserMedia","width","height","srcObject","play","videoWidth","videoHeight","detect","faces","drawFace","censorFace","requestAnimationFrame","face","top","left","boundingBox","clearRect","strokeStyle","lineWidth","strokeRect","imageSmoothingEnabled","drawImage","x","y","then"],"mappings":"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","file":"pixelated-face.9301d95e.js","sourceRoot":"..","sourcesContent":["//----------ASSIGNING VARIABLES AND CONTEXT-------------\r\n\r\nconst video = document.querySelector(`.video`);\r\nconst canvas = document.querySelector(`.first`);\r\nconst faceCanvas = document.querySelector(`.second`);\r\nconsole.log(video, canvas, faceCanvas);\r\nconst ctx = canvas.getContext(`2d`);\r\nconst faceCtx = faceCanvas.getContext(`2d`);\r\nconst faceDetector = new window.FaceDetector();\r\n\r\nconst inputs = document.querySelectorAll(`.controls input[type = \"range\"]`);\r\nconsole.log(inputs);\r\n\r\nconst options = {\r\n  SIZE: 10,\r\n  SCALE: 1.35\r\n};\r\n\r\n// --------------FUNCTION FOR HANDLING EVENTS---------------\r\n\r\ninputs.forEach(input => input.addEventListener(`input`, handleEvent));\r\n\r\nfunction handleEvent(event) {\r\n  const input = event.currentTarget;\r\n  options[input.name] = input.value;\r\n  console.log(options.SCALE, options.SIZE);\r\n}\r\n\r\n// -----------FUNCTION FOR PLAYING VIDEO---------------\r\n\r\nasync function populateVideo() {\r\n  const stream = await navigator.mediaDevices.getUserMedia({\r\n    video: { width: 1280, height: 720 }\r\n  });\r\n  video.srcObject = stream;\r\n  await video.play();\r\n  canvas.width = video.videoWidth;\r\n  canvas.height = video.videoHeight;\r\n  faceCanvas.width = video.videoWidth;\r\n  faceCanvas.height = video.videoHeight;\r\n}\r\n\r\n// ----------------FUNCTION FOR DETECTING FACE------------------\r\n\r\nasync function detect() {\r\n  const faces = await faceDetector.detect(video);\r\n  console.log(faces);\r\n  faces.forEach(drawFace);\r\n  faces.forEach(censorFace);\r\n  requestAnimationFrame(detect);\r\n}\r\n\r\n//----------FUNCTION FOR DRAWING FACE------------\r\n\r\nfunction drawFace(face) {\r\n  const { width, height, top, left } = face.boundingBox;\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  ctx.strokeStyle = \"#ffc600\";\r\n  ctx.lineWidth = 2;\r\n  ctx.strokeRect(left, top, width, height);\r\n}\r\n\r\n//-------------FUNCTION FOR CENSORING FACE--------------\r\n\r\nfunction censorFace({ boundingBox: face }) {\r\n  //destructuring and giving it a name\r\n  faceCtx.imageSmoothingEnabled = false;\r\n  faceCtx.clearRect(0, 0, faceCanvas.width, faceCanvas.height);\r\n  faceCtx.drawImage(\r\n    video,\r\n    face.x,\r\n    face.y,\r\n    face.width,\r\n    face.height,\r\n    face.x,\r\n    face.y,\r\n    options.SIZE,\r\n    options.SIZE\r\n  );\r\n\r\n  const width = options.SCALE * face.width;\r\n  const height = options.SCALE * face.height;\r\n  faceCtx.drawImage(\r\n    faceCanvas,\r\n    face.x,\r\n    face.y,\r\n    options.SIZE,\r\n    options.SIZE,\r\n    face.x - (width - face.width) / 2,\r\n    face.y - (height - face.height) / 2,\r\n    width,\r\n    height\r\n  );\r\n}\r\n\r\npopulateVideo().then(detect);\r\n"]}